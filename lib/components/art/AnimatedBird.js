import { Component } from 'react'
import cn from 'classnames'

const states = [
  'M189.65 125.45c-7.86-1.25-13.95-4.63-16.34-6.38-9.03-4.17-17.34 3.67-20.82 4.02-3.48.33-17.63.27-22.85.26-4.53 0-14.83-6.72-26.42-5.56C52.8 123.82 0 152.83 0 153.5c0 .6 24.58-1.3 35.4.24 1.4 4.47 8.02 9.6 8.02 9.6.58 5.1 5.1 8 5.1 8-1.28 2.65 3.94 5.1 3.94 5.1-.35 2.65 2.78 3.58 2.78 3.58-.12 1.4 2.1 3.36 2.1 3.36-.48 10.08 9.72 24 9.72 24 2.2 10.18 5.2 8.27 6.02 8.68 3.25 12.05 5.4 8.7 6.67 9.2s5.15 13.04 6.3 10.96c1.17-2.1 1.98-1.5 1.98-1.5.87 5.32 5.33 10.07 5.9 9.6.6-.46 1.63-3.24 1.63-3.24.47 2.1 5.45 9.16 6.38 8.74.92-.43.8-6.53.8-6.53.82 1.38 5.16 6.53 6.73 6.47.7-.02.8-8.34.8-8.34 1.75 1.97 4.12 3.36 4.6 2.43.83-1.68-.88-19.46-.88-19.46s1.26 1.62 2.07 1.04.8-9.27.8-9.27 7.14 6.9 8.24 6.14c1.1-.74-1.38-10.18-1.38-10.18s5.9 2.14 6.73.75c1.04-1.76-8.24-42.93-12.18-50.46-2.3-4.42-3.98-13.63-5-20.93 8.96-3.76 25.4-7.38 32.23-8.32 7.6-1.04 23 .92 27.08-.76 4.83-2 8.5-2.85 8.5-2.85 10.46-.72 8.57-4.1 8.57-4.1z',
  'M0 153.5c0-.67 52.8-29.68 103.2-35.7 11.6-1.16 21.9 5.55 26.43 5.56 5.22 0 19.37.07 22.85-.27 3.48-.36 11.8-8.2 20.83-4.03 2.4 1.76 8.5 5.13 16.35 6.38 0 0 1.9 3.38-8.58 4.1 0 0-3.66.86-8.5 2.84-4.07 1.67-19.48-.3-27.07.75-7.6 1.04-27 5.4-34.87 9.56-7.88 4.18-25.15 16-55.62 12.4 0 0-8.22 1.4-17.26-.92S0 154.15 0 153.48z',
  'M189.65 125.45c-7.86-1.25-13.95-4.63-16.34-6.38-9.03-4.17-17.34 3.67-20.82 4.02-3.48.33-17.63.27-22.85.26-4.53 0-14.83-6.72-26.42-5.56-.25.03-.52.06-.78.1-4.1-11.5-6.76-35.06-8.02-42.28-1.4-8-7.64-22.6-12.5-36.5C77 25.22 64.15 4.36 61.37.54s1.04 14.25-1.74 8c-2.78-6.26-3.6-5.92-4.86-5.57-1.28.35 2.15 11.06 1.73 11.12-.36.05-5.2-5.9-7.3-7.3s2.1 7.64-1.4 6.74c-2.05-.53-.67 7.16-2.06 8.2s-.7 8.34-2.78 9.04c-2.1.7.34 7.65-1.4 8.7-1.73 1.03.35 8.33-1.38 9.37-1.74 1.05 1.04 3.83-.35 5.9-1.4 2.1 2.78 7.3.7 9.05-2.1 1.74 1.04 3.48 0 5.22-1.05 1.73 1.38 3.82-.7 6.6-2.1 2.78.35 2.78-1.4 4.52-1.73 1.74 1.05 2.78 1.7 4.52.65 1.74-.3 3.82 0 6.6s.4 4.17.05 5.9c-.35 1.75 1.4 3.5 1.5 5.23.1 1.72 1.28 3.12.23 5.2-1.03 2.1 1.75 2.78 1.58 3.82-.17 1.05 1.22 4.52.17 6.26-1.04 1.74 3.13 3.83 2.1 5.22s2.07 3.47 2.07 3.47l1.6 4.83C21.15 141.3 0 153.07 0 153.5c0 .64 28.7-1.64 37.74.68 9.04 2.32 17.27.93 17.27.93 30.48 3.6 47.75-8.22 55.63-12.4 7.88-4.16 27.28-8.5 34.87-9.55s23 .92 27.08-.76c4.83-2 8.5-2.85 8.5-2.85 10.46-.72 8.57-4.1 8.57-4.1z'
]

class AnimatedBird extends Component {
  constructor (props) {
    super(props)

    this.state = {
      wingState: 0
    }
  }

  componentDidMount () {
    this.flapTimer = window.setInterval(this.moveWings, 16 * 12)
  }

  componentWillUnmount () {
    clearInterval(this.flapTimer)
    window.cancelAnimationFrame(this.flapFrameId)
  }

  render () {
    const { className, ...passable } = this.props

    return (
      <svg
        viewBox='0 0 189.783 249.834'
        width={189.783}
        height={249.834}
        className={cn('animated-bird', className)}
        {...passable}
      >
        <path d={states[this.state.wingState]} />
      </svg>
    )
  }

  moveWings = () => {
    window.cancelAnimationFrame(this.flapFrameId)

    this.flapFrameId = window.requestAnimationFrame(() => {
      const { wingState } = this.state

      if (wingState === 2) {
        return this.setState({ wingState: 0 })
      }

      this.setState({ wingState: wingState + 1 })
    })
  };
}

export default AnimatedBird
